## 1. 核心原则 (Code of Conduct)

1.  **主分支神圣不可侵犯：** 严禁直接 `git push` 到 `master` 分支。所有代码必须通过 **Pull Request (PR)** 合并。
2.  **接口先行：** 在写业务逻辑前，**必须**先在 `libs/shared` 中定义好 TypeScript 接口（Types）。
3.  **不提交敏感信息：** `.env` 文件、私钥、数据库密码绝对不能提交到 GitHub。
4.  **一次一分支：** 一个分支只干一件事（比如只写登录，别顺手把上传也改了）。

请严格按照以下 7 步走：

### 第一步：同步代码
每次开工前，先拉取最新代码，防止冲突。
```bash
git checkout master
git pull origin master
```

### 第二步：创建分支
基于最新的 `master` 创建你的功能分支。
*   **分支命名规范：** `类型/功能描述`
    *   功能：`feat/login-page`
    *   修复：`fix/encryption-bug`
    *   重构：`refactor/socket-gateway`
    *   文档：`docs/api-update`

```bash
git checkout -b feat/login-page
```

### 第三步：开发与提交
*   **Commit Message 规范：** `type: description`
    *   ✅ `feat: 完成用户注册页面的 UI`
    *   ❌ `update code` (禁止这种写法)

```bash
git add .
git commit -m "feat: 完成用户注册页面的 UI"
```

### 第四步：推送到远程
```bash
git push origin feat/login-page
```

### 第五步：发起 Pull Request (PR)
1.  打开 GitHub 仓库页面，点击 **Compare & pull request**。
2.  **标题：** 清晰描述做了什么。
3.  **Reviewers (审查人)：**
    *   **B (前端) 的代码** -> 必须由 **A** 或 **D** 审查。
    *   **C/D (后端) 的代码** -> 互相审查。
    *   **A (加密) 的代码** -> 由 **组长** 或 **D** 审查。
4.  点击 **Create Pull Request**。

### 第六步：代码审查 (Code Review)
*   **审查人**收到通知后，检查代码逻辑、安全隐患（如 Log 打印了密钥）。
*   如果有问题，选择 **Request changes**。
*   如果没问题，选择 **Approve**。

### 第七步：合并 (Merge)
*   获得 Approve 后，点击 **Squash and merge**。
*   删除远程分支 (GitHub 会提示 Delete branch)。

---

## 6. 常见问题处理 (Troubleshooting)

### Q: 我推代码时提示冲突 (Conflict) 怎么办？
**不要慌，这是正常的。**
1.  切回你的分支：`git checkout feat/my-feature`
2.  把主分支代码拉进来：`git pull origin master`
3.  Git 会提示哪些文件冲突。打开 VS Code，找到 `<<<<<<<` 标记的地方。
4.  **手动修改**代码，保留需要的，删除多余的。
5.  保存文件，然后：
    ```bash
    git add .
    git commit -m "fix: 解决冲突"
    git push origin feat/my-feature
    ```

### Q: `npm install` 报错或者跑不起来？
通常是因为有人更新了依赖包。
1.  删除本地依赖：`rm -rf node_modules` (Windows手动删)
2.  重新安装：`npm install`

### Q: A 的加密库更新了，我怎么用？
1.  `git pull origin master`
2.  如果是 Monorepo 且 A 改了 `package.json`，需要重新 `npm install`。
3.  直接调用 A 暴露出的新函数即可。

---

## 7. 给 Reviewer (审查人) 的检查清单

在点击 "Approve" 之前，请确认：
- [ ] **安全性：** 没有明文打印密码、密钥？
- [ ] **规范性：** 变量命名是否清晰？没有大量的注释掉的代码？
- [ ] **逻辑：** 这里的逻辑是否符合我们的安全设计（如：是否真的用了一次一密）？
- [ ] **测试：** 这个功能在本地能跑通吗？

---

**Happy Coding! 🚀 保持沟通，有问题群里吼一声。**